{% extends 'polecacz/base.html' %}
{% load static %}
{% block title %}Lista gier{% endblock %}
{% block content %}
<h2>Lista gier</h2>
<label><strong>Kolejność sortowania:</strong></label>
<div class="btn-group" role="group">
    <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ order_name }}
    </button>
    <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=rank">Ranking rosnąco</a>
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=-rank">Ranking malejąco</a>
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=name">Alfabetycznie A-Z</a>
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=-name">Alfabetycznie Z-A</a>
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=rating">Średnia rosnąco</a>
        <a class="dropdown-item" href="{% url 'polecacz:game_list' %}?ordering=-rating">Średnia malejąco</a>
    </div>
  </div>

{% for game in games_list %}
    <div class="container p-3 my-3" style="border:2px solid #38220f;">
        <div class="media">
<!--        <img src={{ game.image.url }} class="align-self-start mr-3" style=" border:2px solid #38220f;width:130px;height:130px"/>-->
   <div class="media-body">
       <h4 class="mt-0"><a href="{% url 'polecacz:game_detail' game.id %}" class="text-muted" >{{ game.name }}</a></h4>
       <h6 class="mt-0"><strong>Ranking: </strong>{{ game.rank }}</h6>
       <h6 class="mt-0"><strong>Średnia ocen: </strong>{{ game.rating }}</h6>
       <h6 class="mt-0"><strong>Rok wydania: </strong>{{ game.year_published }}</h6>
  </div>
    </div>
    </div>
{% endfor %}
{% if is_paginated %}
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-end">
       {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="{% url 'polecacz:game_list' %}?ordering={{ordering}}&page={{ page_obj.previous_page_number }}">Poprzednia</a></li>
            <li class="page-item"><a class="page-link" href="{% url 'polecacz:game_list' %}?ordering={{ordering}}&page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a></li>
       {% endif %}
    <li class="page-item active"><a class="page-link" href="{% url 'polecacz:game_list' %}?ordering={{ordering}}&page={{ page_obj.number }}">{{ page_obj.number }}</a></li>
      {% if page_obj.has_next %}
        <li class="page-item"><a class="page-link" href="{% url 'polecacz:game_list' %}?ordering={{ordering}}&page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a></li>
        <li class="page-item"><a class="page-link" href="{% url 'polecacz:game_list' %}?ordering={{ordering}}&page={{ page_obj.next_page_number }}">Następna</a></li>
      {% endif %}
  </ul>
</nav>
{% else %}
    <p>Nie znaleziono gier(</p>
{% endif %}
{% endblock %}